<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>6. Writing Text Files — How to Think like a Computer Scientist: Interactive Edition</title>
<link href="/_static/basic.css" rel="stylesheet" type="text/css"/>
<link href="/_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="/_static/bootstrap-3.0.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codemirror.css" rel="stylesheet" type="text/css"/>
<link href="/_static/livecode.css" rel="stylesheet" type="text/css"/>
<link href="/_static/pytutor.css" rel="stylesheet" type="text/css"/>
<link href="/_static/modal-basic.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codesplain.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codemirror.css" rel="stylesheet" type="text/css"/>
<link href="/_static/activecode.css" rel="stylesheet" type="text/css"/>
<link href="/_static/parsons.css" rel="stylesheet" type="text/css"/>
<link href="/_static/lib/prettify.css" rel="stylesheet" type="text/css"/>
<link href="/_static/dragndrop.css" rel="stylesheet" type="text/css"/>
<link href="/_static/tabbedstuff.css" rel="stylesheet" type="text/css"/>
<link href="/_static/clickable.css" rel="stylesheet" type="text/css"/>
<link href="/_static/datafile.css" rel="stylesheet" type="text/css"/>
<link href="/_static/poll.css" rel="stylesheet" type="text/css"/>
<link href="/_static/video.css" rel="stylesheet" type="text/css"/>
<link href="/_static/fitb.css" rel="stylesheet" type="text/css"/>
<link href="/_static/jquery-ui-1.10.3.custom.min.css" rel="stylesheet" type="text/css"/>
<link href="/_static/bootstrap-sphinx.css" rel="stylesheet" type="text/css"/>
<link href="/_static/user-highlights.css" rel="stylesheet" type="text/css"/>
<link href="/_static/runestone-custom-sphinx-bootstrap.css" rel="stylesheet" type="text/css"/>
<link href="/_static/brian_custom.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="/_static/runestonebase.js" type="text/javascript"></script>
<script src="/_static/jquery.js" type="text/javascript"></script>
<script src="/_static/underscore.js" type="text/javascript"></script>
<script src="/_static/doctools.js" type="text/javascript"></script>
<script src="/_static/livecode.js" type="text/javascript"></script>
<script src="/_static/clike.js" type="text/javascript"></script>
<script src="/_static/animationbase.js" type="text/javascript"></script>
<script src="/_static/d3.v2.min.js" type="text/javascript"></script>
<script src="/_static/jquery.ba-bbq.min.js" type="text/javascript"></script>
<script src="/_static/jquery.jsPlumb-1.3.10-all-min.js" type="text/javascript"></script>
<script src="/_static/pytutor.js" type="text/javascript"></script>
<script src="/_static/codelens.js" type="text/javascript"></script>
<script src="/_static/shortanswer.js" type="text/javascript"></script>
<script src="/_static/timed_shortanswer.js" type="text/javascript"></script>
<script src="/_static/codesplain.js" type="text/javascript"></script>
<script src="/_static/jquery.highlight.js" type="text/javascript"></script>
<script src="/_static/bookfuncs.js" type="text/javascript"></script>
<script src="/_static/codemirror.js" type="text/javascript"></script>
<script src="/_static/xml.js" type="text/javascript"></script>
<script src="/_static/css.js" type="text/javascript"></script>
<script src="/_static/htmlmixed.js" type="text/javascript"></script>
<script src="/_static/python.js" type="text/javascript"></script>
<script src="/_static/javascript.js" type="text/javascript"></script>
<script src="/_static/activecode.js" type="text/javascript"></script>
<script src="/_static/skulpt.min.js" type="text/javascript"></script>
<script src="/_static/skulpt-stdlib.js" type="text/javascript"></script>
<script src="/_static/clike.js" type="text/javascript"></script>
<script src="/_static/timed_activecode.js" type="text/javascript"></script>
<script src="/_static/lib/jquery.min.js" type="text/javascript"></script>
<script src="/_static/lib/jquery-ui.min.js" type="text/javascript"></script>
<script src="/_static/lib/jquery.ui.touch-punch.min.js" type="text/javascript"></script>
<script src="/_static/lib/prettify.js" type="text/javascript"></script>
<script src="/_static/lib/underscore-min.js" type="text/javascript"></script>
<script src="/_static/lib/lis.js" type="text/javascript"></script>
<script src="/_static/parsons_setup.js" type="text/javascript"></script>
<script src="/_static/parsons.js" type="text/javascript"></script>
<script src="/_static/parsons-noconflict.js" type="text/javascript"></script>
<script src="/_static/timedparsons.js" type="text/javascript"></script>
<script src="/_static/dragndrop.js" type="text/javascript"></script>
<script src="/_static/timeddnd.js" type="text/javascript"></script>
<script src="/_static/tabbedstuff.js" type="text/javascript"></script>
<script src="/_static/clickable.js" type="text/javascript"></script>
<script src="/_static/timedclickable.js" type="text/javascript"></script>
<script src="/_static/skulpt.min.js" type="text/javascript"></script>
<script src="/_static/skulpt-stdlib.js" type="text/javascript"></script>
<script src="/_static/datafile.js" type="text/javascript"></script>
<script src="/_static/poll.js" type="text/javascript"></script>
<script src="/_static/reveal.js" type="text/javascript"></script>
<script src="/_static/mchoice.js" type="text/javascript"></script>
<script src="/_static/timedmc.js" type="text/javascript"></script>
<script src="/_static/fitb.js" type="text/javascript"></script>
<script src="/_static/timedfitb.js" type="text/javascript"></script>
<script src="/_static/timed.js" type="text/javascript"></script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<script src="/_static/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script>
<script src="/_static/jquery-fix.js" type="text/javascript"></script>
<script src="/_static/bootstrap-3.0.0/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/_static/bootstrap-sphinx.js" type="text/javascript"></script>
<script src="/_static/waypoints.min.js" type="text/javascript"></script>
<script src="/_static/rangy-core.js" type="text/javascript"></script>
<script src="/_static/rangy-textrange.js" type="text/javascript"></script>
<script src="/_static/rangy-cssclassapplier.js" type="text/javascript"></script>
<script src="/_static/user-highlights.js" type="text/javascript"></script>
<script src="/_static/jquery.idle-timer.js" type="text/javascript"></script>
<script src="/_static/processing-1.4.1.min.js" type="text/javascript"></script>
<script src="/_static/jquery.hotkey.js" type="text/javascript"></script>
<script src="/_static/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
<script src="/_static/brian_custom.js" type="text/javascript"></script>
<link href="/toc" rel="top" title="How to Think like a Computer Scientist: Interactive Edition"/>
<link href="/Files/Glossary" rel="next" title="7. Glossary"/>
<link href="/Files/AlternativeFileReadingMethods" rel="prev" title="5. Alternative File Reading Methods"/>
<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://coding101.devetry.com' ? 'http://coding101.devetry.com' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'thinkcspy';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = true;
  eBookConfig.build_info = "unknown";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'thinkcspy';
  eBookConfig.lang = 'python'
</script>
<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>
</meta></meta></head>
<body role="document">
<!-- Begin navbar -->
<div class="navbar navbar-default navbar-fixed-top" id="navbar" role="navigation">
<div class="container">
<div class="navbar-header">
<!-- .btn-navbar is used as the toggle for collapsed navbar content -->
<button class="navbar-toggle" data-target=".navbar-ex1-collapse" data-toggle="collapse" type="button">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<div>
<a class="brand-logo" href="/" style='background: transparent url("../_static/img/devetry_logo.png") no-repeat 0px 0px;'>  </a>
<a class="navbar-brand" href="/">Think Python</a>
</div>
</div>
<div class="navbar-collapse collapse navbar-ex1-collapse">
<ul class="nav navbar-nav navbar-right">
<li class="divider-vertical"></li>
<!-- scratch code dropdown -->
<li>
<a href="javascript:ACFactory.toggleScratchActivecode()">
<i class="glyphicon glyphicon-edit" style="opacity:0.9;"></i>
</a>
</li>
<!-- search dropdown -->
<li class="dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" href="#">
<i class="glyphicon glyphicon-search" style="opacity:0.9;"></i>
</a>
<ul class="dropdown-menu">
<li style="width: 240px;">
<form action="../search.html" class="navbar-search" method="get" style="margin:10px;">
<div class="input-group">
<input class="form-control" name="q" placeholder="Search this book" type="text"/>
<span class="input-group-btn">
<button class="btn btn-primary" style="margin:0;" type="submit">
<i class="glyphicon glyphicon-search"></i>
</button>
</span>
</div><!-- /input-group -->
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</li>
<li class="divider"></li>
<li><a href="/genindex">Directory of Concepts</a></li>
</ul>
</li>
<!-- end search dropdown -->
<li class="divider-vertical"></li>
</ul></div>
</div>
</div>
<div class="container" id="continue-reading"></div>
<div class="container" id="main-content">
<div class="section" id="writing-text-files">
<h1>6. Writing Text Files<a class="headerlink" href="#writing-text-files" title="Permalink to this headline">¶</a></h1>
<p>One of the most commonly performed data processing tasks is to read data from a file, manipulate it in some way, and then write the resulting data out to a new data file to be used for other purposes later. To accomplish this, the <code class="docutils literal"><span class="pre">open</span></code> function discussed above can also be used to create a new file prepared for writing. Note in <a class="reference internal" href="/Files/intro-WorkingwithDataFiles#filemethods1a"><span class="std std-ref">Table 1</span></a> above that the only difference between opening a file for writing and  opening a file for reading is the use of the <code class="docutils literal"><span class="pre">'w'</span></code> flag instead of the <code class="docutils literal"><span class="pre">'r'</span></code> flag as the second parameter. When we open a file for writing, a new, empty file with that name is created and made ready to accept our data. As before, the function returns a reference to the new file object.</p>
<p><a class="reference internal" href="/Files/AlternativeFileReadingMethods#filemethods2a"><span class="std std-ref">Table 2</span></a> above shows one additional file method that we have not used thus far. The <code class="docutils literal"><span class="pre">write</span></code> method allows us to add data to a text file. Recall that text files contain sequences of characters. We usually think of these character sequences as being the lines of the file where each line ends with the newline <code class="docutils literal"><span class="pre">\n</span></code> character. Be very careful to notice that the <code class="docutils literal"><span class="pre">write</span></code> method takes one parameter, a string. When invoked, the characters of the string will be added to the end of the file. This means that it is the programmers job to include the newline characters as part of the string if desired.</p>
<p>As an example, consider the <code class="docutils literal"><span class="pre">qbdata.txt</span></code> file once again. Assume that we have been asked to provide a file consisting of only the names of the
quarterbacks. In addition, the names should be in the order last name followed by first name with the names separated by a comma. This
is a very common type of request, usually due to the fact that someone has a program that requires its data input format to be different from what is available.</p>
<p>To construct this file, we will approach the problem using a similar algorithm as above. After opening the file, we will iterate through the
lines, break each line into its parts, choose the parts that we need, and then output them. Eventually, the output will be written to a file.</p>
<p>The program below solves part of the problem. Notice that it reads the data and creates a string consisting of last name followed by a comma followed by the first name. In this example, we simply print the lines as they are created.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">infile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"qbdata.txt"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span>
<span class="n">aline</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="k">while</span> <span class="n">aline</span><span class="p">:</span>
    <span class="n">items</span> <span class="o">=</span> <span class="n">aline</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">dataline</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">','</span> <span class="o">+</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dataline</span><span class="p">)</span>
    <span class="n">aline</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>

<span class="n">infile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>When we run this program, we see the lines of output on the screen. Once we are satisfied that it is creating the appropriate output, the next step is to add the necessary pieces to produce an output file and write the data lines to it. To start, we need to open a new output file by adding another call to the <code class="docutils literal"><span class="pre">open</span></code> function, <code class="docutils literal"><span class="pre">outfile</span> <span class="pre">=</span> <span class="pre">open("qbnames.txt",'w')</span></code>, using the <code class="docutils literal"><span class="pre">'w'</span></code> flag. We can choose any file name we like. If the file does not exist, it will be created. However, if the file does exist, it will be reinitialized as empty and you will lose any previous contents.</p>
<p>Once the file has been created, we just need to call the <code class="docutils literal"><span class="pre">write</span></code> method passing the string that we wish to add to the file. In this case, the string is already being printed so we will just change the <code class="docutils literal"><span class="pre">print</span></code> into a call to the <code class="docutils literal"><span class="pre">write</span></code> method. However, there is one additional part of the data line that we need to include. The newline character needs to be concatenated  to the end of the line. The entire line now becomes <code class="docutils literal"><span class="pre">outfile.write(dataline</span> <span class="pre">+</span> <span class="pre">'\n')</span></code>.  We also need to close the file when we are done.</p>
<p>The complete program is shown below.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">infile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"qbdata.txt"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span>
<span class="n">outfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"qbnames.txt"</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span>

<span class="n">aline</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="k">while</span> <span class="n">aline</span><span class="p">:</span>
    <span class="n">items</span> <span class="o">=</span> <span class="n">aline</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">dataline</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">','</span> <span class="o">+</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">dataline</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
    <span class="n">aline</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>

<span class="n">infile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">outfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>The contents of the <code class="docutils literal"><span class="pre">qbnames.txt</span></code> file are as follows.</p>
<pre id="">
McCoy,Colt
Freeman,Josh
Vick,Michael
Schaub,Matt
Rivers,Philip
Hasselbeck,Matt
Clausen,Jimmy
Flacco,Joe
Orton,Kyle
Campbell,Jason
Manning,Peyton
Brees,Drew
Ryan,Matt
Cassel,Matt
Sanchez,Mark
Favre,Brett
Garrard,David
Manning,Eli
Palmer,Carson
Smith,Alex
Henne,Chad
Romo,Tony
Cutler,Jay
Kitna,Jon
Brady,Tom
Roethlisberger,Ben
Collins,Kerry
Anderson,Derek
Fitzpatrick,Ryan
McNabb,Donovan
Kolb,Kevin
Rodgers,Aaron
Bradford,Sam
Hill,Shaun
</pre></div>
<li class="navLink" data-toggle="tooltip" id="relations-prev" title="Previous Section - 5. Alternative File Reading Methods">
<a href="/Files/AlternativeFileReadingMethods">
<i class="prevNav glyphicon glyphicon-chevron-left"></i>
</a>
</li>
<a class="navLinkBg" href="/Files/AlternativeFileReadingMethods" id="navLinkBgLeft"></a>
<li class="navLink" data-toggle="tooltip" id="relations-next" title="Next Section - 7. Glossary">
<a href="/Files/Glossary">
<i class="nextNav glyphicon glyphicon-chevron-right" id="relationsNextIcon"></i>
</a>
</li>
<a class="navLinkBg navLink" href="/Files/Glossary" id="navLinkBgRight"></a>
<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>
</div>
<footer>
<div class="center">
<a class="edit-this-page-link" href="https://github.com/bgschiller/thinkcspy/tree/master/_sources/Files/WritingTextFiles.rst">
<svg class="edit-icon" enable-background="new 0 0 100 100" version="1.1" viewbox="0 0 100 100" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px"><polygon points="15.081,64.633 37.24,86.144 79.92,42.182 57.762,20.678 "></polygon><polygon points="31.516,92.047 9.356,70.535 0,100.869 "></polygon><path d="M0,100.869"></path><polygon points="77.841,0 63.5,14.768 85.659,36.279 100,21.504 "></polygon></svg>
          Edit this page on GitHub
      </a>
</div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78748330-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>