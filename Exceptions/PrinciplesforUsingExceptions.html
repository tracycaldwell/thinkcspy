<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>3. Principles for Using Exceptions — How to Think like a Computer Scientist: Interactive Edition</title>
<link href="/_static/basic.css" rel="stylesheet" type="text/css"/>
<link href="/_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="/_static/bootstrap-3.0.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codemirror.css" rel="stylesheet" type="text/css"/>
<link href="/_static/livecode.css" rel="stylesheet" type="text/css"/>
<link href="/_static/pytutor.css" rel="stylesheet" type="text/css"/>
<link href="/_static/modal-basic.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codesplain.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codemirror.css" rel="stylesheet" type="text/css"/>
<link href="/_static/activecode.css" rel="stylesheet" type="text/css"/>
<link href="/_static/parsons.css" rel="stylesheet" type="text/css"/>
<link href="/_static/lib/prettify.css" rel="stylesheet" type="text/css"/>
<link href="/_static/dragndrop.css" rel="stylesheet" type="text/css"/>
<link href="/_static/tabbedstuff.css" rel="stylesheet" type="text/css"/>
<link href="/_static/clickable.css" rel="stylesheet" type="text/css"/>
<link href="/_static/datafile.css" rel="stylesheet" type="text/css"/>
<link href="/_static/poll.css" rel="stylesheet" type="text/css"/>
<link href="/_static/video.css" rel="stylesheet" type="text/css"/>
<link href="/_static/fitb.css" rel="stylesheet" type="text/css"/>
<link href="/_static/jquery-ui-1.10.3.custom.min.css" rel="stylesheet" type="text/css"/>
<link href="/_static/bootstrap-sphinx.css" rel="stylesheet" type="text/css"/>
<link href="/_static/user-highlights.css" rel="stylesheet" type="text/css"/>
<link href="/_static/runestone-custom-sphinx-bootstrap.css" rel="stylesheet" type="text/css"/>
<link href="/_static/brian_custom.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="/_static/runestonebase.js" type="text/javascript"></script>
<script src="/_static/jquery.js" type="text/javascript"></script>
<script src="/_static/underscore.js" type="text/javascript"></script>
<script src="/_static/doctools.js" type="text/javascript"></script>
<script src="/_static/livecode.js" type="text/javascript"></script>
<script src="/_static/clike.js" type="text/javascript"></script>
<script src="/_static/animationbase.js" type="text/javascript"></script>
<script src="/_static/d3.v2.min.js" type="text/javascript"></script>
<script src="/_static/jquery.ba-bbq.min.js" type="text/javascript"></script>
<script src="/_static/jquery.jsPlumb-1.3.10-all-min.js" type="text/javascript"></script>
<script src="/_static/pytutor.js" type="text/javascript"></script>
<script src="/_static/codelens.js" type="text/javascript"></script>
<script src="/_static/shortanswer.js" type="text/javascript"></script>
<script src="/_static/timed_shortanswer.js" type="text/javascript"></script>
<script src="/_static/codesplain.js" type="text/javascript"></script>
<script src="/_static/jquery.highlight.js" type="text/javascript"></script>
<script src="/_static/bookfuncs.js" type="text/javascript"></script>
<script src="/_static/codemirror.js" type="text/javascript"></script>
<script src="/_static/xml.js" type="text/javascript"></script>
<script src="/_static/css.js" type="text/javascript"></script>
<script src="/_static/htmlmixed.js" type="text/javascript"></script>
<script src="/_static/python.js" type="text/javascript"></script>
<script src="/_static/javascript.js" type="text/javascript"></script>
<script src="/_static/activecode.js" type="text/javascript"></script>
<script src="/_static/skulpt.min.js" type="text/javascript"></script>
<script src="/_static/skulpt-stdlib.js" type="text/javascript"></script>
<script src="/_static/clike.js" type="text/javascript"></script>
<script src="/_static/timed_activecode.js" type="text/javascript"></script>
<script src="/_static/lib/jquery.min.js" type="text/javascript"></script>
<script src="/_static/lib/jquery-ui.min.js" type="text/javascript"></script>
<script src="/_static/lib/jquery.ui.touch-punch.min.js" type="text/javascript"></script>
<script src="/_static/lib/prettify.js" type="text/javascript"></script>
<script src="/_static/lib/underscore-min.js" type="text/javascript"></script>
<script src="/_static/lib/lis.js" type="text/javascript"></script>
<script src="/_static/parsons_setup.js" type="text/javascript"></script>
<script src="/_static/parsons.js" type="text/javascript"></script>
<script src="/_static/parsons-noconflict.js" type="text/javascript"></script>
<script src="/_static/timedparsons.js" type="text/javascript"></script>
<script src="/_static/dragndrop.js" type="text/javascript"></script>
<script src="/_static/timeddnd.js" type="text/javascript"></script>
<script src="/_static/tabbedstuff.js" type="text/javascript"></script>
<script src="/_static/clickable.js" type="text/javascript"></script>
<script src="/_static/timedclickable.js" type="text/javascript"></script>
<script src="/_static/skulpt.min.js" type="text/javascript"></script>
<script src="/_static/skulpt-stdlib.js" type="text/javascript"></script>
<script src="/_static/datafile.js" type="text/javascript"></script>
<script src="/_static/poll.js" type="text/javascript"></script>
<script src="/_static/reveal.js" type="text/javascript"></script>
<script src="/_static/mchoice.js" type="text/javascript"></script>
<script src="/_static/timedmc.js" type="text/javascript"></script>
<script src="/_static/fitb.js" type="text/javascript"></script>
<script src="/_static/timedfitb.js" type="text/javascript"></script>
<script src="/_static/timed.js" type="text/javascript"></script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<script src="/_static/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script>
<script src="/_static/jquery-fix.js" type="text/javascript"></script>
<script src="/_static/bootstrap-3.0.0/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/_static/bootstrap-sphinx.js" type="text/javascript"></script>
<script src="/_static/waypoints.min.js" type="text/javascript"></script>
<script src="/_static/rangy-core.js" type="text/javascript"></script>
<script src="/_static/rangy-textrange.js" type="text/javascript"></script>
<script src="/_static/rangy-cssclassapplier.js" type="text/javascript"></script>
<script src="/_static/user-highlights.js" type="text/javascript"></script>
<script src="/_static/jquery.idle-timer.js" type="text/javascript"></script>
<script src="/_static/processing-1.4.1.min.js" type="text/javascript"></script>
<script src="/_static/jquery.hotkey.js" type="text/javascript"></script>
<script src="/_static/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
<script src="/_static/brian_custom.js" type="text/javascript"></script>
<link href="/toc" rel="top" title="How to Think like a Computer Scientist: Interactive Edition"/>
<link href="/Exceptions/ExceptionSyntax" rel="next" title="4. Exception Syntax"/>
<link href="/Exceptions/StandardExceptions" rel="prev" title="2. Standard Exceptions"/>
<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://coding101.devetry.com' ? 'http://coding101.devetry.com' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'thinkcspy';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = true;
  eBookConfig.build_info = "unknown";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'thinkcspy';
  eBookConfig.lang = 'python'
</script>
<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>
</meta></meta></head>
<body role="document">
<!-- Begin navbar -->
<div class="navbar navbar-default navbar-fixed-top" id="navbar" role="navigation">
<div class="container">
<div class="navbar-header">
<!-- .btn-navbar is used as the toggle for collapsed navbar content -->
<button class="navbar-toggle" data-target=".navbar-ex1-collapse" data-toggle="collapse" type="button">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<div>
<a class="brand-logo" href="/" style='background: transparent url("../_static/img/devetry_logo.png") no-repeat 0px 0px;'>  </a>
<a class="navbar-brand" href="/">Think Python</a>
</div>
</div>
<div class="navbar-collapse collapse navbar-ex1-collapse">
<ul class="nav navbar-nav navbar-right">
<li class="divider-vertical"></li>
<!-- scratch code dropdown -->
<li>
<a href="javascript:ACFactory.toggleScratchActivecode()">
<i class="glyphicon glyphicon-edit" style="opacity:0.9;"></i>
</a>
</li>
<!-- search dropdown -->
<li class="dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" href="#">
<i class="glyphicon glyphicon-search" style="opacity:0.9;"></i>
</a>
<ul class="dropdown-menu">
<li style="width: 240px;">
<form action="../search.html" class="navbar-search" method="get" style="margin:10px;">
<div class="input-group">
<input class="form-control" name="q" placeholder="Search this book" type="text"/>
<span class="input-group-btn">
<button class="btn btn-primary" style="margin:0;" type="submit">
<i class="glyphicon glyphicon-search"></i>
</button>
</span>
</div><!-- /input-group -->
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</li>
<li class="divider"></li>
<li><a href="/genindex">Directory of Concepts</a></li>
</ul>
</li>
<!-- end search dropdown -->
<li class="divider-vertical"></li>
</ul></div>
</div>
</div>
<div class="container" id="continue-reading"></div>
<div class="container" id="main-content">
<div class="section" id="principles-for-using-exceptions">
<span id="index-0"></span><h1>3. Principles for Using Exceptions<a class="headerlink" href="#principles-for-using-exceptions" title="Permalink to this headline">¶</a></h1>
<p>There are many bad examples of <em>exception</em> use on the Internet. The purpose of an exception is to modify the flow of control, not to catch simple errors. If your <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block is in the same function that <code class="docutils literal"><span class="pre">raises</span></code> the exception, you are probably misusing exceptions.</p>
<div class="topic">
<p class="topic-title first">Principle 1:</p>
<p>If a condition can be handled using the normal flow of control, don’t use an exception!</p>
</div>
<p>Example 1:</p>
<table border="1" class="docutils">
<colgroup>
<col width="49%"></col>
<col width="51%"></col>
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>DON’T DO THIS</strong>:</td>
<td>When you can just as easily test for no
items in the list doing this:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-Python"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">avg</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
    <span class="n">avg</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-Python"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">avg</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">avg</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Example 2:</p>
<table border="1" class="docutils">
<colgroup>
<col width="49%"></col>
<col width="51%"></col>
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>DON’T DO THIS</strong>:</td>
<td>When you can just as easily test for a
valid index doing this:</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-Python"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">my_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
<span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-Python"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">my_list</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">my_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>You’ll learn more about lists soon, but here just note that a list can hold many values and the length of a list can be determined using the function <code class="docutils literal"><span class="pre">len</span></code>. Therefore, in Example 1, you can test to make sure a list is not empty before using its length as a divisor (in case its length is 0).</p>
<p>Also note that a value in a list can be accessed as shown above in Example 2, and an <code class="docutils literal"><span class="pre">IndexError</span></code> will occur if you try to access a value using an index greater than <em>the length of the list minus 1</em>.</p>
<div class="topic">
<p class="topic-title first">Principle 2:</p>
<p>If you call a function that potentially raises exceptions, and you can do something appropriate to deal with the exception, then surround the code that contains the <em>function call</em> with a <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block.</p>
</div>
<p>Example: Suppose you have a function that determines how many slices of pizza each guest at a party may have. The user enters how many people will be at the party. If the user enters <code class="docutils literal"><span class="pre">0</span></code>, not only would that make for a very sad party, but it would raise an exception in the <code class="docutils literal"><span class="pre">slices_per_person</span></code> function. So it makes sense to wrap the call to that function inside a <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block in <code class="docutils literal"><span class="pre">main</span></code>. That way we can give the user a useful error message and re-prompt them for valid input until they enter a number besides zero.</p>
<textarea data-audio="" data-codelens="true" data-component="activecode" data-lang="python" data-timelimit="25000" id="exception_example">
def slices_per_person(num_people):
    num_slices = 8
    slices_per_person = num_slices / num_people
    return slices_per_person

def main():
    num_people_str = input("Number of people attending the pizza party: ")
    num_people_int = int(num_people_str)
    try:
        print("Each person gets", slices_per_person(num_people_int), "slices")
    except ZeroDivisionError:
        print("You must enter a number other than zero. Don't make me sad.")
        main()

if __name__ == "__main__":
    main()
</textarea>
<div class="topic">
<p class="topic-title first">Principle 3:</p>
<p>If you call a function that potentially raises exceptions, and you can’t do anything meaningful about the conditions that are raised, then don’t catch the exception message(s).</p>
</div>
<p>At this point in time, we haven’t learned enough Python to demonstrate an application of this principle in code. But one scenario we can imagine is if you have a program that utilizes a database and for some reason (usually because of the wrong user and password in the connection string) the program is not able to connect to the database, then there is no point in catching that error. After all, the program <em>should</em> crash at that point, since it won’t be able to do any meaningful work if it can’t access the data in the database. And by crashing, it will signal to the developer (or the user will signal to the developer or tech support team via an angry email) that it needs immediate attention.</p>
<p>A useful, if graphic, metaphor for this principle is that if you have a life-threatening wound, you don’t want to just put a band-aid on it, or otherwise hide or downplay it. You want it to be clear that it needs serious attention pronto, and that is the kind of message a crashed program sends.</p>
</div>
<li class="navLink" data-toggle="tooltip" id="relations-prev" title="Previous Section - 2. Standard Exceptions">
<a href="/Exceptions/StandardExceptions">
<i class="prevNav glyphicon glyphicon-chevron-left"></i>
</a>
</li>
<a class="navLinkBg" href="/Exceptions/StandardExceptions" id="navLinkBgLeft"></a>
<li class="navLink" data-toggle="tooltip" id="relations-next" title="Next Section - 4. Exception Syntax">
<a href="/Exceptions/ExceptionSyntax">
<i class="nextNav glyphicon glyphicon-chevron-right" id="relationsNextIcon"></i>
</a>
</li>
<a class="navLinkBg navLink" href="/Exceptions/ExceptionSyntax" id="navLinkBgRight"></a>
<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>
</div>
<footer>
<div class="center">
<a class="edit-this-page-link" href="https://github.com/bgschiller/thinkcspy/tree/master/_sources/Exceptions/PrinciplesforUsingExceptions.rst">
<svg class="edit-icon" enable-background="new 0 0 100 100" version="1.1" viewbox="0 0 100 100" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px"><polygon points="15.081,64.633 37.24,86.144 79.92,42.182 57.762,20.678 "></polygon><polygon points="31.516,92.047 9.356,70.535 0,100.869 "></polygon><path d="M0,100.869"></path><polygon points="77.841,0 63.5,14.768 85.659,36.279 100,21.504 "></polygon></svg>
          Edit this page on GitHub
      </a>
</div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78748330-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>