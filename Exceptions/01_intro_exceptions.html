<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Intro to Exceptions — How to Think like a Computer Scientist: Interactive Edition</title>
<link href="/_static/basic.css" rel="stylesheet" type="text/css"/>
<link href="/_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="/_static/bootstrap-3.0.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codemirror.css" rel="stylesheet" type="text/css"/>
<link href="/_static/livecode.css" rel="stylesheet" type="text/css"/>
<link href="/_static/pytutor.css" rel="stylesheet" type="text/css"/>
<link href="/_static/modal-basic.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codesplain.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codemirror.css" rel="stylesheet" type="text/css"/>
<link href="/_static/activecode.css" rel="stylesheet" type="text/css"/>
<link href="/_static/parsons.css" rel="stylesheet" type="text/css"/>
<link href="/_static/lib/prettify.css" rel="stylesheet" type="text/css"/>
<link href="/_static/dragndrop.css" rel="stylesheet" type="text/css"/>
<link href="/_static/tabbedstuff.css" rel="stylesheet" type="text/css"/>
<link href="/_static/clickable.css" rel="stylesheet" type="text/css"/>
<link href="/_static/datafile.css" rel="stylesheet" type="text/css"/>
<link href="/_static/poll.css" rel="stylesheet" type="text/css"/>
<link href="/_static/video.css" rel="stylesheet" type="text/css"/>
<link href="/_static/fitb.css" rel="stylesheet" type="text/css"/>
<link href="/_static/jquery-ui-1.10.3.custom.min.css" rel="stylesheet" type="text/css"/>
<link href="/_static/bootstrap-sphinx.css" rel="stylesheet" type="text/css"/>
<link href="/_static/user-highlights.css" rel="stylesheet" type="text/css"/>
<link href="/_static/runestone-custom-sphinx-bootstrap.css" rel="stylesheet" type="text/css"/>
<link href="/_static/brian_custom.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="/_static/runestonebase.js" type="text/javascript"></script>
<script src="/_static/jquery.js" type="text/javascript"></script>
<script src="/_static/underscore.js" type="text/javascript"></script>
<script src="/_static/doctools.js" type="text/javascript"></script>
<script src="/_static/livecode.js" type="text/javascript"></script>
<script src="/_static/clike.js" type="text/javascript"></script>
<script src="/_static/animationbase.js" type="text/javascript"></script>
<script src="/_static/d3.v2.min.js" type="text/javascript"></script>
<script src="/_static/jquery.ba-bbq.min.js" type="text/javascript"></script>
<script src="/_static/jquery.jsPlumb-1.3.10-all-min.js" type="text/javascript"></script>
<script src="/_static/pytutor.js" type="text/javascript"></script>
<script src="/_static/codelens.js" type="text/javascript"></script>
<script src="/_static/shortanswer.js" type="text/javascript"></script>
<script src="/_static/timed_shortanswer.js" type="text/javascript"></script>
<script src="/_static/codesplain.js" type="text/javascript"></script>
<script src="/_static/jquery.highlight.js" type="text/javascript"></script>
<script src="/_static/bookfuncs.js" type="text/javascript"></script>
<script src="/_static/codemirror.js" type="text/javascript"></script>
<script src="/_static/xml.js" type="text/javascript"></script>
<script src="/_static/css.js" type="text/javascript"></script>
<script src="/_static/htmlmixed.js" type="text/javascript"></script>
<script src="/_static/python.js" type="text/javascript"></script>
<script src="/_static/javascript.js" type="text/javascript"></script>
<script src="/_static/activecode.js" type="text/javascript"></script>
<script src="/_static/skulpt.min.js" type="text/javascript"></script>
<script src="/_static/skulpt-stdlib.js" type="text/javascript"></script>
<script src="/_static/clike.js" type="text/javascript"></script>
<script src="/_static/timed_activecode.js" type="text/javascript"></script>
<script src="/_static/lib/jquery.min.js" type="text/javascript"></script>
<script src="/_static/lib/jquery-ui.min.js" type="text/javascript"></script>
<script src="/_static/lib/jquery.ui.touch-punch.min.js" type="text/javascript"></script>
<script src="/_static/lib/prettify.js" type="text/javascript"></script>
<script src="/_static/lib/underscore-min.js" type="text/javascript"></script>
<script src="/_static/lib/lis.js" type="text/javascript"></script>
<script src="/_static/parsons_setup.js" type="text/javascript"></script>
<script src="/_static/parsons.js" type="text/javascript"></script>
<script src="/_static/parsons-noconflict.js" type="text/javascript"></script>
<script src="/_static/timedparsons.js" type="text/javascript"></script>
<script src="/_static/dragndrop.js" type="text/javascript"></script>
<script src="/_static/timeddnd.js" type="text/javascript"></script>
<script src="/_static/tabbedstuff.js" type="text/javascript"></script>
<script src="/_static/clickable.js" type="text/javascript"></script>
<script src="/_static/timedclickable.js" type="text/javascript"></script>
<script src="/_static/skulpt.min.js" type="text/javascript"></script>
<script src="/_static/skulpt-stdlib.js" type="text/javascript"></script>
<script src="/_static/datafile.js" type="text/javascript"></script>
<script src="/_static/poll.js" type="text/javascript"></script>
<script src="/_static/reveal.js" type="text/javascript"></script>
<script src="/_static/mchoice.js" type="text/javascript"></script>
<script src="/_static/timedmc.js" type="text/javascript"></script>
<script src="/_static/fitb.js" type="text/javascript"></script>
<script src="/_static/timedfitb.js" type="text/javascript"></script>
<script src="/_static/timed.js" type="text/javascript"></script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<script src="/_static/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script>
<script src="/_static/jquery-fix.js" type="text/javascript"></script>
<script src="/_static/bootstrap-3.0.0/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/_static/bootstrap-sphinx.js" type="text/javascript"></script>
<script src="/_static/waypoints.min.js" type="text/javascript"></script>
<script src="/_static/rangy-core.js" type="text/javascript"></script>
<script src="/_static/rangy-textrange.js" type="text/javascript"></script>
<script src="/_static/rangy-cssclassapplier.js" type="text/javascript"></script>
<script src="/_static/user-highlights.js" type="text/javascript"></script>
<script src="/_static/jquery.idle-timer.js" type="text/javascript"></script>
<script src="/_static/processing-1.4.1.min.js" type="text/javascript"></script>
<script src="/_static/jquery.hotkey.js" type="text/javascript"></script>
<script src="/_static/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
<script src="/_static/brian_custom.js" type="text/javascript"></script>
<link href="/toc" rel="top" title="How to Think like a Computer Scientist: Interactive Edition"/>
<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://coding101.devetry.com' ? 'http://coding101.devetry.com' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'thinkcspy';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = true;
  eBookConfig.build_info = "unknown";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'thinkcspy';
  eBookConfig.lang = 'python'
</script>
<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>
</meta></meta></head>
<body role="document">
<!-- Begin navbar -->
<div class="navbar navbar-default navbar-fixed-top" id="navbar" role="navigation">
<div class="container">
<div class="navbar-header">
<!-- .btn-navbar is used as the toggle for collapsed navbar content -->
<button class="navbar-toggle" data-target=".navbar-ex1-collapse" data-toggle="collapse" type="button">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<div>
<a class="brand-logo" href="/" style='background: transparent url("../_static/img/devetry_logo.png") no-repeat 0px 0px;'>  </a>
<a class="navbar-brand" href="/">Think Python</a>
</div>
</div>
<div class="navbar-collapse collapse navbar-ex1-collapse">
<ul class="nav navbar-nav navbar-right">
<li class="divider-vertical"></li>
<!-- scratch code dropdown -->
<li>
<a href="javascript:ACFactory.toggleScratchActivecode()">
<i class="glyphicon glyphicon-edit" style="opacity:0.9;"></i>
</a>
</li>
<!-- search dropdown -->
<li class="dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" href="#">
<i class="glyphicon glyphicon-search" style="opacity:0.9;"></i>
</a>
<ul class="dropdown-menu">
<li style="width: 240px;">
<form action="../search.html" class="navbar-search" method="get" style="margin:10px;">
<div class="input-group">
<input class="form-control" name="q" placeholder="Search this book" type="text"/>
<span class="input-group-btn">
<button class="btn btn-primary" style="margin:0;" type="submit">
<i class="glyphicon glyphicon-search"></i>
</button>
</span>
</div><!-- /input-group -->
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</li>
<li class="divider"></li>
<li><a href="/genindex">Directory of Concepts</a></li>
</ul>
</li>
<!-- end search dropdown -->
<li class="divider-vertical"></li>
</ul></div>
</div>
</div>
<div class="container" id="continue-reading"></div>
<div class="container" id="main-content">
<div class="section" id="intro-to-exceptions">
<h1>Intro to Exceptions<a class="headerlink" href="#intro-to-exceptions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-an-exception">
<h2>What is an exception?<a class="headerlink" href="#what-is-an-exception" title="Permalink to this headline">¶</a></h2>
<p>An <em>exception</em> is a signal that a condition has occurred that can’t be easily
handled using the normal flow-of-control of a Python program. <em>Exceptions</em>
are often defined as being “errors” but this is not always the case. All
errors in Python are dealt with using <em>exceptions</em>, but not all
<em>exceptions</em> are errors.</p>
</div>
<div class="section" id="exception-handling-flow-of-control">
<h2>Exception Handling Flow-of-control<a class="headerlink" href="#exception-handling-flow-of-control" title="Permalink to this headline">¶</a></h2>
<p>To explain what an <em>exception</em> does, let’s review the normal “flow of control”
in a Python program. In normal operation Python executes statements sequentially,
one after the other. For three constructs, if-statements, loops and function
invocations, this sequential execution is interrupted.</p>
<ul class="simple">
<li>For <em>if-statements</em>, only one of several statement blocks is executed and
then flow-of-control jumps to the first statement after the if-statement.</li>
<li>For <em>loops</em>, when the end of the loop is reached, flow-of-control jumps back
to the start of the loop and a test is used to determine if the loop needs
to execute again. If the loop is finished, flow-of-control jumps to the
first statement after the loop.</li>
<li>For <em>function invocations</em>, flow-of-control jumps to the first statement in
the called function, the function is executed, and the flow-of-control
jumps back to the next statement after the function call.</li>
</ul>
<p>Do you see the pattern? If the flow-of-control is not purely sequential, it
always executes the first statement immediately following the altered
flow-of-control. That is why we can say that Python flow-of-control is
sequential. But there are cases where this sequential flow-of-control does
not work well. An example will best explain this.</p>
<p>Let’s suppose that a program contains complex logic that is appropriately
subdivided into functions. The program is running and it currently is executing
function D, which was called by function C, which was called by function B,
which was called by function A, which was called from the main function. This
is illustrated by the following simplistic code example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="n">A</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">A</span><span class="p">():</span>
  <span class="n">B</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">B</span><span class="p">():</span>
  <span class="n">C</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">C</span><span class="p">():</span>
  <span class="n">D</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">D</span><span class="p">():</span>
  <span class="c1"># processing</span>
</pre></div>
</div>
<p>Function D determines that the current processing won’t work for some reason
and needs to send a message to the main function to try something different.
However, all that function D can do using normal flow-of-control is to return
a value to function C. So function D returns a special value to function C
that means “try something else”. Function C has to recognize this value,
quit its processing, and return the special value to function B. And so forth
and so on. It would be very helpful if function D could communicate directly
with the main function (or functions A and B) without sending a special value
through the intermediate calling functions. Well, that is exactly what an
<em>exception</em> does. An <em>exception</em> is a message to any function currently on the
executing program’s “run-time-stack”. (The “run-time-stack” is what keeps track
of the active function calls while a program is executing.)</p>
<p>In Python, your create an <em>exception</em> message using the <code class="docutils literal"><span class="pre">raise</span></code> command. The
simplest format for a <code class="docutils literal"><span class="pre">raise</span></code> command is the keyword <code class="docutils literal"><span class="pre">raise</span></code> followed by
the name of an exception. For example:</p>
<div class="highlight-Python"><div class="highlight"><pre><span></span><span class="k">raise</span> <span class="n">ExceptionName</span>
</pre></div>
</div>
<p>So what happens to an <em>exception</em> message after it is created? The normal
flow-of-control of a Python program is interrupted and Python starts looking
for any code in its run-time-stack that is interested in dealing with the
message. It always searches from its current location at the bottom of the
run-time-stack, up the stack, in the order the functions were originally
called. A <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block is used to say “hey,
I can deal with that message.” The first <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block that Python
finds on its search back up the run-time-stack will be executed. If there
is no <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block found, the program “crashes” and prints its
run-time-stack to the console.</p>
<p>Let’s take a look at several code examples to illustrate this process. If
function D had a <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block around the code that <code class="docutils literal"><span class="pre">raised</span></code> a
<code class="docutils literal"><span class="pre">MyException</span></code> message, then the flow-of-control would be passed to the
local <code class="docutils literal"><span class="pre">except</span></code> block. That is, function D would handle it’s own issues.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="n">A</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">A</span><span class="p">():</span>
  <span class="n">B</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">B</span><span class="p">():</span>
  <span class="n">C</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">C</span><span class="p">():</span>
  <span class="n">D</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">D</span><span class="p">():</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="c1"># processing code</span>
    <span class="k">if</span> <span class="n">something_special_happened</span><span class="p">:</span>
      <span class="k">raise</span> <span class="n">MyException</span>
  <span class="k">except</span> <span class="n">MyException</span><span class="p">:</span>
    <span class="c1"># execute if the MyException message happened</span>
</pre></div>
</div>
<p>But perhaps function C is better able to handle the issue, so you could put
the <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block in function C:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="n">A</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">A</span><span class="p">():</span>
  <span class="n">B</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">B</span><span class="p">():</span>
  <span class="n">C</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">C</span><span class="p">():</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="n">D</span><span class="p">()</span>
  <span class="k">except</span> <span class="n">MyException</span><span class="p">:</span>
    <span class="c1"># execute if the MyException message happened</span>

<span class="k">def</span> <span class="nf">D</span><span class="p">():</span>
  <span class="c1"># processing code</span>
  <span class="k">if</span> <span class="n">something_special_happened</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">MyException</span>
</pre></div>
</div>
<p>But perhaps the main function is better able to handle the issue, so you
could put the <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block in the main function:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="n">A</span><span class="p">()</span>
  <span class="k">except</span> <span class="n">MyException</span><span class="p">:</span>
    <span class="c1"># execute if the MyException message happened</span>

<span class="k">def</span> <span class="nf">A</span><span class="p">():</span>
  <span class="n">B</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">B</span><span class="p">():</span>
  <span class="n">C</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">C</span><span class="p">():</span>
  <span class="n">D</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">D</span><span class="p">():</span>
  <span class="c1"># processing code</span>
  <span class="k">if</span> <span class="n">something_special_happened</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">MyException</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Let’s summarize our discussion. An <em>exception</em> is a message that something
“out-of-the-ordinary” has happened and the normal flow-of-control needs to
be abandoned. When an <em>exception</em> is <code class="docutils literal"><span class="pre">raised</span></code>, Python searches its run-time-stack
for a <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block that can appropriately deal with the condition.
The first <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block that knows how to deal with the issue is
executed and then flow-of-control is returned to its normal sequential execution.
If no appropriate <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block is found, the program “crashes” and
prints its run-time-stack to the console.</p>
<p>As our final example, here is a program that crashes because no valid
<code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block was found to process the <code class="docutils literal"><span class="pre">MyException</span></code> message.
Notice that the <code class="docutils literal"><span class="pre">try:</span> <span class="pre">except:</span></code> block in the main function only knows how
to deal with <code class="docutils literal"><span class="pre">ZeroDivisonError</span></code> messages, not <code class="docutils literal"><span class="pre">MyException</span></code> messages.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="n">A</span><span class="p">()</span>
  <span class="k">except</span> <span class="n">ZeroDivisonError</span><span class="p">:</span>
    <span class="c1"># execute if a ZeroDivisonError message happened</span>

<span class="k">def</span> <span class="nf">A</span><span class="p">():</span>
  <span class="n">B</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">B</span><span class="p">():</span>
  <span class="n">C</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">C</span><span class="p">():</span>
  <span class="n">D</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">D</span><span class="p">():</span>
  <span class="c1"># processing code</span>
  <span class="k">if</span> <span class="n">something_special_happened</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">MyException</span>
</pre></div>
</div>
<span class="target" id="index-0"></span></div>
</div>
<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>
</div>
<footer>
<div class="center">
<a class="edit-this-page-link" href="https://github.com/bgschiller/thinkcspy/tree/master/_sources/Exceptions/01_intro_exceptions.rst">
<svg class="edit-icon" enable-background="new 0 0 100 100" version="1.1" viewbox="0 0 100 100" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px"><polygon points="15.081,64.633 37.24,86.144 79.92,42.182 57.762,20.678 "></polygon><polygon points="31.516,92.047 9.356,70.535 0,100.869 "></polygon><path d="M0,100.869"></path><polygon points="77.841,0 63.5,14.768 85.659,36.279 100,21.504 "></polygon></svg>
          Edit this page on GitHub
      </a>
</div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78748330-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>