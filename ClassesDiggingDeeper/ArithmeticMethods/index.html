<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>4. Arithmetic Methods — How to Think like a Computer Scientist: Interactive Edition</title>
<link href="/_static/basic.css" rel="stylesheet" type="text/css"/>
<link href="/_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="/_static/bootstrap-3.0.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codemirror.css" rel="stylesheet" type="text/css"/>
<link href="/_static/livecode.css" rel="stylesheet" type="text/css"/>
<link href="/_static/pytutor.css" rel="stylesheet" type="text/css"/>
<link href="/_static/modal-basic.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codesplain.css" rel="stylesheet" type="text/css"/>
<link href="/_static/codemirror.css" rel="stylesheet" type="text/css"/>
<link href="/_static/activecode.css" rel="stylesheet" type="text/css"/>
<link href="/_static/parsons.css" rel="stylesheet" type="text/css"/>
<link href="/_static/lib/prettify.css" rel="stylesheet" type="text/css"/>
<link href="/_static/dragndrop.css" rel="stylesheet" type="text/css"/>
<link href="/_static/tabbedstuff.css" rel="stylesheet" type="text/css"/>
<link href="/_static/clickable.css" rel="stylesheet" type="text/css"/>
<link href="/_static/datafile.css" rel="stylesheet" type="text/css"/>
<link href="/_static/poll.css" rel="stylesheet" type="text/css"/>
<link href="/_static/video.css" rel="stylesheet" type="text/css"/>
<link href="/_static/fitb.css" rel="stylesheet" type="text/css"/>
<link href="/_static/jquery-ui-1.10.3.custom.min.css" rel="stylesheet" type="text/css"/>
<link href="/_static/bootstrap-sphinx.css" rel="stylesheet" type="text/css"/>
<link href="/_static/user-highlights.css" rel="stylesheet" type="text/css"/>
<link href="/_static/runestone-custom-sphinx-bootstrap.css" rel="stylesheet" type="text/css"/>
<link href="/_static/brian_custom.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="/_static/runestonebase.js" type="text/javascript"></script>
<script src="/_static/jquery.js" type="text/javascript"></script>
<script src="/_static/underscore.js" type="text/javascript"></script>
<script src="/_static/doctools.js" type="text/javascript"></script>
<script src="/_static/livecode.js" type="text/javascript"></script>
<script src="/_static/clike.js" type="text/javascript"></script>
<script src="/_static/animationbase.js" type="text/javascript"></script>
<script src="/_static/d3.v2.min.js" type="text/javascript"></script>
<script src="/_static/jquery.ba-bbq.min.js" type="text/javascript"></script>
<script src="/_static/jquery.jsPlumb-1.3.10-all-min.js" type="text/javascript"></script>
<script src="/_static/pytutor.js" type="text/javascript"></script>
<script src="/_static/codelens.js" type="text/javascript"></script>
<script src="/_static/shortanswer.js" type="text/javascript"></script>
<script src="/_static/timed_shortanswer.js" type="text/javascript"></script>
<script src="/_static/codesplain.js" type="text/javascript"></script>
<script src="/_static/jquery.highlight.js" type="text/javascript"></script>
<script src="/_static/bookfuncs.js" type="text/javascript"></script>
<script src="/_static/codemirror.js" type="text/javascript"></script>
<script src="/_static/xml.js" type="text/javascript"></script>
<script src="/_static/css.js" type="text/javascript"></script>
<script src="/_static/htmlmixed.js" type="text/javascript"></script>
<script src="/_static/python.js" type="text/javascript"></script>
<script src="/_static/javascript.js" type="text/javascript"></script>
<script src="/_static/activecode.js" type="text/javascript"></script>
<script src="/_static/skulpt.min.js" type="text/javascript"></script>
<script src="/_static/skulpt-stdlib.js" type="text/javascript"></script>
<script src="/_static/clike.js" type="text/javascript"></script>
<script src="/_static/timed_activecode.js" type="text/javascript"></script>
<script src="/_static/lib/jquery.min.js" type="text/javascript"></script>
<script src="/_static/lib/jquery-ui.min.js" type="text/javascript"></script>
<script src="/_static/lib/jquery.ui.touch-punch.min.js" type="text/javascript"></script>
<script src="/_static/lib/prettify.js" type="text/javascript"></script>
<script src="/_static/lib/underscore-min.js" type="text/javascript"></script>
<script src="/_static/lib/lis.js" type="text/javascript"></script>
<script src="/_static/parsons_setup.js" type="text/javascript"></script>
<script src="/_static/parsons.js" type="text/javascript"></script>
<script src="/_static/parsons-noconflict.js" type="text/javascript"></script>
<script src="/_static/timedparsons.js" type="text/javascript"></script>
<script src="/_static/dragndrop.js" type="text/javascript"></script>
<script src="/_static/timeddnd.js" type="text/javascript"></script>
<script src="/_static/tabbedstuff.js" type="text/javascript"></script>
<script src="/_static/clickable.js" type="text/javascript"></script>
<script src="/_static/timedclickable.js" type="text/javascript"></script>
<script src="/_static/skulpt.min.js" type="text/javascript"></script>
<script src="/_static/skulpt-stdlib.js" type="text/javascript"></script>
<script src="/_static/datafile.js" type="text/javascript"></script>
<script src="/_static/poll.js" type="text/javascript"></script>
<script src="/_static/reveal.js" type="text/javascript"></script>
<script src="/_static/mchoice.js" type="text/javascript"></script>
<script src="/_static/timedmc.js" type="text/javascript"></script>
<script src="/_static/fitb.js" type="text/javascript"></script>
<script src="/_static/timedfitb.js" type="text/javascript"></script>
<script src="/_static/timed.js" type="text/javascript"></script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<script src="/_static/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script>
<script src="/_static/jquery-fix.js" type="text/javascript"></script>
<script src="/_static/bootstrap-3.0.0/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/_static/bootstrap-sphinx.js" type="text/javascript"></script>
<script src="/_static/waypoints.min.js" type="text/javascript"></script>
<script src="/_static/rangy-core.js" type="text/javascript"></script>
<script src="/_static/rangy-textrange.js" type="text/javascript"></script>
<script src="/_static/rangy-cssclassapplier.js" type="text/javascript"></script>
<script src="/_static/user-highlights.js" type="text/javascript"></script>
<script src="/_static/jquery.idle-timer.js" type="text/javascript"></script>
<script src="/_static/processing-1.4.1.min.js" type="text/javascript"></script>
<script src="/_static/jquery.hotkey.js" type="text/javascript"></script>
<script src="/_static/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
<script src="/_static/brian_custom.js" type="text/javascript"></script>
<link href="/toc" rel="top" title="How to Think like a Computer Scientist: Interactive Edition"/>
<link href="/ClassesDiggingDeeper/Inheritance" rel="next" title="5. Inheritance"/>
<link href="/ClassesDiggingDeeper/Sameness" rel="prev" title="3. Sameness"/>
<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'http://coding101.devetry.com' ? 'http://coding101.devetry.com' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'thinkcspy';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = true;
  eBookConfig.build_info = "unknown";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = false;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'thinkcspy';
  eBookConfig.lang = 'python'
</script>
<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>
</meta></meta></head>
<body role="document">
<!-- Begin navbar -->
<div class="navbar navbar-default navbar-fixed-top" id="navbar" role="navigation">
<div class="container">
<div class="navbar-header">
<!-- .btn-navbar is used as the toggle for collapsed navbar content -->
<button class="navbar-toggle" data-target=".navbar-ex1-collapse" data-toggle="collapse" type="button">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<div>
<a class="brand-logo" href="/" style='background: transparent url("../_static/img/devetry_logo.png") no-repeat 0px 0px;'>  </a>
<a class="navbar-brand" href="/">Think Python</a>
</div>
</div>
<div class="navbar-collapse collapse navbar-ex1-collapse">
<ul class="nav navbar-nav navbar-right">
<li class="divider-vertical"></li>
<!-- scratch code dropdown -->
<li>
<a href="javascript:ACFactory.toggleScratchActivecode()">
<i class="glyphicon glyphicon-edit" style="opacity:0.9;"></i>
</a>
</li>
<!-- search dropdown -->
<li class="dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" href="#">
<i class="glyphicon glyphicon-search" style="opacity:0.9;"></i>
</a>
<ul class="dropdown-menu">
<li style="width: 240px;">
<form action="../search.html" class="navbar-search" method="get" style="margin:10px;">
<div class="input-group">
<input class="form-control" name="q" placeholder="Search this book" type="text"/>
<span class="input-group-btn">
<button class="btn btn-primary" style="margin:0;" type="submit">
<i class="glyphicon glyphicon-search"></i>
</button>
</span>
</div><!-- /input-group -->
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</li>
<li class="divider"></li>
<li><a href="/genindex">Directory of Concepts</a></li>
</ul>
</li>
<!-- end search dropdown -->
<li class="divider-vertical"></li>
</ul></div>
</div>
</div>
<div class="container" id="continue-reading"></div>
<div class="container" id="main-content">
<div class="section" id="arithmetic-methods">
<span id="index-0"></span><h1>4. Arithmetic Methods<a class="headerlink" href="#arithmetic-methods" title="Permalink to this headline">¶</a></h1>
<p>Now we’re ready to add another method to our <code class="docutils literal"><span class="pre">Fraction</span></code> class. In particular, we will implement an arithmetic method. Let’s begin by considering what it means to add two fractions together. Remember that you can only add fractions if they have the same denominator. The easiest way to find a common denominator is to multiply the two individual denominators together. Anything we do to the denominator needs to the done to the numerator. This gives us the following equation for fraction addition:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">/</span><span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="o">/</span><span class="n">d</span> <span class="o">=</span> <span class="p">(</span><span class="n">ad</span> <span class="o">+</span> <span class="n">cb</span><span class="p">)</span><span class="o">/</span><span class="n">bd</span>
</pre></div>
</div>
<p>Our <code class="docutils literal"><span class="pre">add</span></code> method will take a <code class="docutils literal"><span class="pre">Fraction</span></code> as a parameter. It will return a new <code class="docutils literal"><span class="pre">Fraction</span></code> representing the sum. We will use the equation shown above to compute the new numerator and the new denominator. Since this equation will not give us lowest terms, we will utilize a similar technique as was used in the <code class="docutils literal"><span class="pre">simplify</span></code> method to find the greatest common divisor and then divide each part of the new fraction.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fraction2</span><span class="p">):</span>

    <span class="n">new_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">*</span> <span class="n">fraction2</span><span class="o">.</span><span class="n">den</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">den</span> <span class="o">*</span> <span class="n">fraction2</span><span class="o">.</span><span class="n">num</span>
    <span class="n">new_den</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">den</span> <span class="o">*</span> <span class="n">fraction2</span><span class="o">.</span><span class="n">den</span>

    <span class="n">common</span> <span class="o">=</span> <span class="n">find_gcd</span><span class="p">(</span><span class="n">new_num</span><span class="p">,</span><span class="n">new_den</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">new_num</span><span class="o">//</span><span class="n">common</span><span class="p">,</span><span class="n">new_den</span><span class="o">//</span><span class="n">common</span><span class="p">)</span>
</pre></div>
</div>
<p>You can try the addition method and then modify the fractions and retry.</p>
<textarea data-audio="" data-codelens="true" data-component="activecode" data-lang="python" data-timelimit="25000" id="fractions_add1">
def find_gcd(numerator, denominator):
    while numerator % denominator != 0:
        old_num = numerator
        old_den = denominator

        numerator = old_den
        denominator = old_num % old_den

    return denominator

class Fraction:

    def __init__(self, top, bottom):

        self.num = top        # the numerator is on top
        self.den = bottom     # the denominator is on the bottom

    def __repr__(self):
        return str(self.num) + "/" + str(self.den)

    def simplify(self):
        common = find_gcd(self.num, self.den)

        self.num = self.num // common
        self.den = self.den // common

    def add(self,fraction2):

        new_num = self.num * fraction2.den + self.den * fraction2.num
        new_den = self.den * fraction2.den

        common = find_gcd(new_num, new_den)

        return Fraction(new_num // common, new_den // common)

def main():
    f1 = Fraction(1, 2)
    f2 = Fraction(1, 4)

    f3 = f1.add(f2)
    print(f3)

if __name__ == "__main__":
    main()
</textarea>
<p>One final modification to this method will be quite useful. Instead of invoking the <code class="docutils literal"><span class="pre">add</span></code> method, we can use the addition operator <code class="docutils literal"><span class="pre">+</span></code>. This requires that we implement another special method, this time called <code class="docutils literal"><span class="pre">__add__</span></code>, in order to override the default implementation of <code class="docutils literal"><span class="pre">+</span></code>. The details of the method are the same as above.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fraction2</span><span class="p">):</span>

    <span class="n">new_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">*</span> <span class="n">fraction2</span><span class="o">.</span><span class="n">den</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">den</span> <span class="o">*</span> <span class="n">fraction2</span><span class="o">.</span><span class="n">num</span>
    <span class="n">new_den</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">den</span> <span class="o">*</span> <span class="n">fraction2</span><span class="o">.</span><span class="n">den</span>

    <span class="n">common</span> <span class="o">=</span> <span class="n">find_gcd</span><span class="p">(</span><span class="n">new_num</span><span class="p">,</span> <span class="n">new_den</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">new_num</span> <span class="o">//</span> <span class="n">common</span><span class="p">,</span> <span class="n">new_den</span> <span class="o">//</span> <span class="n">common</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we can perform addition in the same manner that we are used to with other numeric data.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">f1</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">f2</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">f3</span> <span class="o">=</span> <span class="n">f1</span> <span class="o">+</span> <span class="n">f2</span>    <span class="c1"># calls the __add__ method of f1</span>
<span class="k">print</span><span class="p">(</span><span class="n">f3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<li class="navLink" data-toggle="tooltip" id="relations-prev" title="Previous Section - 3. Sameness">
<a href="/ClassesDiggingDeeper/Sameness">
<i class="prevNav glyphicon glyphicon-chevron-left"></i>
</a>
</li>
<a class="navLinkBg" href="/ClassesDiggingDeeper/Sameness" id="navLinkBgLeft"></a>
<li class="navLink" data-toggle="tooltip" id="relations-next" title="Next Section - 5. Inheritance">
<a href="/ClassesDiggingDeeper/Inheritance">
<i class="nextNav glyphicon glyphicon-chevron-right" id="relationsNextIcon"></i>
</a>
</li>
<a class="navLinkBg navLink" href="/ClassesDiggingDeeper/Inheritance" id="navLinkBgRight"></a>
<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>
</div>
<footer>
<div class="center">
<a class="edit-this-page-link" href="https://github.com/bgschiller/thinkcspy/tree/master/_sources/ClassesDiggingDeeper/ArithmeticMethods.rst">
<svg class="edit-icon" enable-background="new 0 0 100 100" version="1.1" viewbox="0 0 100 100" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px"><polygon points="15.081,64.633 37.24,86.144 79.92,42.182 57.762,20.678 "></polygon><polygon points="31.516,92.047 9.356,70.535 0,100.869 "></polygon><path d="M0,100.869"></path><polygon points="77.841,0 63.5,14.768 85.659,36.279 100,21.504 "></polygon></svg>
          Edit this page on GitHub
      </a>
</div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78748330-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>